{"ast":null,"code":"import { __assign } from \"tslib\";\nimport React, { useEffect, useState, useCallback } from 'react';\nimport dayjs from 'dayjs';\nimport isBetween from 'dayjs/plugin/isBetween';\nimport { handleBookings, isValidMonthsOption } from './Utils';\nimport Controls from './Controls';\nimport Year from './Year';\nimport Key from './Key';\ndayjs.extend(isBetween);\nvar Calendar = function (_a) {\n  var _b = _a.bookings,\n    bookings = _b === void 0 ? [] : _b,\n    _c = _a.showNumberOfMonths,\n    showNumberOfMonths = _c === void 0 ? 12 : _c,\n    _d = _a.showKey,\n    showKey = _d === void 0 ? true : _d,\n    _e = _a.showCurrentYear,\n    showCurrentYear = _e === void 0 ? true : _e,\n    _f = _a.showControls,\n    showControls = _f === void 0 ? true : _f;\n  var initialMonth = 1;\n  var initialPage = 1;\n  var totalCalendarMonths = 12;\n  var _showNumberOfMonths = isValidMonthsOption(showNumberOfMonths) ? showNumberOfMonths : totalCalendarMonths;\n  var _year = dayjs().year();\n  var _g = useState(_year),\n    activeYear = _g[0],\n    setActiveYear = _g[1];\n  var _h = useState([]),\n    bookedDates = _h[0],\n    setBookedDates = _h[1];\n  var _j = useState([]),\n    lateCheckouts = _j[0],\n    setLateCheckouts = _j[1];\n  var _k = useState(initialMonth),\n    monthsFrom = _k[0],\n    setMonthsFrom = _k[1];\n  var _l = useState(initialPage),\n    page = _l[0],\n    setPage = _l[1];\n  var totalPages = totalCalendarMonths / _showNumberOfMonths;\n  var resetCalendarYear = function () {\n    setMonthsFrom(initialMonth);\n    setPage(initialPage);\n  };\n  var goToPage = useCallback(function (_page) {\n    var _monthsFrom = _page * _showNumberOfMonths - _showNumberOfMonths + 1;\n    setMonthsFrom(_monthsFrom);\n    setPage(_page);\n  }, [_showNumberOfMonths]);\n  var findActivePage = useCallback(function () {\n    var now = dayjs();\n    var _month = now.month() + 1;\n    var _page = 1;\n    for (var i = 1; i <= totalPages; i++) {\n      var found = _month <= i * _showNumberOfMonths;\n      _page = i;\n      if (found) break;\n    }\n    goToPage(_page);\n  }, [goToPage, _showNumberOfMonths, totalPages]);\n  useEffect(function () {\n    if (_showNumberOfMonths !== totalCalendarMonths) {\n      findActivePage();\n    }\n  }, [findActivePage, _showNumberOfMonths]);\n  var initCal = useCallback(function () {\n    var now = dayjs();\n    var _year = now.year();\n    setActiveYear(_year);\n    if (_showNumberOfMonths !== totalCalendarMonths) findActivePage();else resetCalendarYear();\n  }, [findActivePage, _showNumberOfMonths]);\n  var prev = useCallback(function () {\n    var isFirstPage = page === 1;\n    if (isFirstPage) {\n      var _previousYear = dayjs(\"\".concat(activeYear)).subtract(1, 'year').year();\n      setActiveYear(_previousYear);\n      if (_showNumberOfMonths === totalCalendarMonths) {\n        resetCalendarYear();\n        return;\n      }\n      var nxtStartingMonth_1 = totalCalendarMonths - _showNumberOfMonths + 1;\n      var nxtPage_1 = totalPages;\n      setMonthsFrom(nxtStartingMonth_1);\n      setPage(nxtPage_1);\n      return;\n    }\n    var nxtStartingMonth = monthsFrom - _showNumberOfMonths;\n    var nxtPage = page - 1;\n    setMonthsFrom(nxtStartingMonth);\n    setPage(nxtPage);\n  }, [page, _showNumberOfMonths, monthsFrom, totalPages, activeYear]);\n  var next = useCallback(function () {\n    var isLastPage = page === totalPages;\n    if (isLastPage) {\n      var _nextYear = dayjs(\"\".concat(activeYear)).add(1, 'year').year();\n      setActiveYear(_nextYear);\n      resetCalendarYear();\n      return;\n    }\n    var nxtStartingMonth = page * _showNumberOfMonths + 1;\n    var nxtPage = page + 1;\n    setMonthsFrom(nxtStartingMonth);\n    setPage(nxtPage);\n  }, [page, totalPages, _showNumberOfMonths, activeYear]);\n  var configControls = {\n    prev: prev,\n    next: next,\n    initCal: initCal\n  };\n  useEffect(function () {\n    var _a = handleBookings({\n        bookings: bookings,\n        year: activeYear\n      }),\n      halfDays = _a.halfDays,\n      bookedDays = _a.bookedDays;\n    setBookedDates(bookedDays);\n    setLateCheckouts(halfDays);\n  }, [bookings, activeYear]);\n  var configYear = {\n    showNumberOfMonths: _showNumberOfMonths,\n    bookedDates: bookedDates,\n    lateCheckouts: lateCheckouts,\n    activeYear: activeYear,\n    monthsFrom: monthsFrom\n  };\n  var shouldRender = {\n    key: showKey,\n    currentYear: showCurrentYear,\n    controls: showControls\n  };\n  var layoutClassName = _showNumberOfMonths !== totalCalendarMonths ? _showNumberOfMonths > 1 ? 'twoCol' : 'singleCol' : '';\n  return React.createElement(\"section\", {\n    className: \"calendar \".concat(layoutClassName),\n    \"data-testid\": 'calendar'\n  }, React.createElement(\"div\", {\n    className: 'wrap'\n  }, !shouldRender.controls && !shouldRender.currentYear ? null : React.createElement(\"div\", {\n    className: 'controlWrap'\n  }, shouldRender.currentYear && React.createElement(\"h1\", {\n    className: 'currentYear',\n    \"data-testid\": 'currentYear'\n  }, activeYear), shouldRender.controls && React.createElement(Controls, __assign({}, configControls))), React.createElement(Year, __assign({}, configYear)), shouldRender.key && React.createElement(Key, null)));\n};\nexport default Calendar;","map":{"version":3,"mappings":"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","names":["React","useEffect","useState","useCallback","dayjs","isBetween","handleBookings","isValidMonthsOption","Controls","Year","Key","extend","Calendar","_a","_b","bookings","_c","showNumberOfMonths","_d","showKey","_e","showCurrentYear","_f","showControls","initialMonth","initialPage","totalCalendarMonths","_showNumberOfMonths","_year","year","activeYear","setActiveYear","bookedDates","setBookedDates","lateCheckouts","setLateCheckouts","monthsFrom","setMonthsFrom","page","setPage","totalPages","resetCalendarYear","goToPage","_page","_monthsFrom","findActivePage","now","_month","month","i","found","initCal","prev","isFirstPage","_previousYear","subtract","nxtStartingMonth_1","nxtPage_1","nxtStartingMonth","nxtPage","next","isLastPage","_nextYear","add","configControls","halfDays","bookedDays","configYear","shouldRender","key","currentYear","controls","layoutClassName","className"],"sources":["../../../../src/components/Calendar/index.tsx"],"sourcesContent":[null]},"metadata":{},"sourceType":"module","externalDependencies":[]}